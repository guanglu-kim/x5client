(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{ObQG:function(T,x,a){T.exports={container:"container___1sYa-",lang:"lang___l6cji",content:"content___2zk1-",top:"top___1C1Zi",header:"header___5xZ3f",logo:"logo___2hXsy",title:"title___1-xuF",desc:"desc___-njyT",main:"main___x4OjT",icon:"icon___rzGKO",other:"other___lLyaU",register:"register___11Twg",prefixIcon:"prefixIcon___23Xrx"}},PdsH:function(T,x,a){"use strict";a.r(x);var oe=a("DYRE"),U=a("zeV3"),ge=a("Znn+"),F=a("ZTPi"),de=a("miYZ"),M=a("tsqr"),f=a("k1fw"),m=a("9og8"),y=a("tJVT"),je=a("fOrg"),G=a("+KLJ"),$=a("WmNS"),l=a.n($),V=a("cJ7L"),L=a("FY4R"),Z=a("3flX"),J=a("Y0UT"),W=a("80zm"),Y=a("CZrw"),C=a("q1tI"),K=a("VMEa"),S=a("Qurx"),Q=a("/aGu"),R=a("tneF"),r=a("9kvl"),X=a("QttV"),H=a("oN5p"),w=a("9W6o"),e=a("nKUr"),k=function(){return Object(e.jsx)(w.a,{copyright:"2020 \u8682\u8681\u96C6\u56E2\u4F53\u9A8C\u6280\u672F\u90E8\u51FA\u54C1",links:[{key:"Ant Design Pro",title:"Ant Design Pro",href:"https://pro.ant.design",blankTarget:!0},{key:"github",title:Object(e.jsx)(H.a,{}),href:"https://github.com/ant-design/ant-design-pro",blankTarget:!0},{key:"Ant Design",title:"Ant Design",href:"https://ant.design",blankTarget:!0}]})},q=a("74pX");function _(h,g){return B.apply(this,arguments)}function B(){return B=Object(m.a)(l.a.mark(function h(g,d){return l.a.wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return j.abrupt("return",Object(r.g)("/api/login/captcha",Object(f.a)({method:"POST",params:Object(f.a)({},g)},d||{})));case 1:case"end":return j.stop()}},h)})),B.apply(this,arguments)}var ee=a("ObQG"),s=a.n(ee),N=function(g){var d=g.content;return Object(e.jsx)(G.a,{style:{marginBottom:24},message:d,type:"error",showIcon:!0})},ae=function(){!r.e||setTimeout(function(){var g=r.e.location.query,d=g,O=d.redirect;r.e.push(O||"/")},10)},te=function(){var g=Object(C.useState)(!1),d=Object(y.a)(g,2),O=d[0],j=d[1],se=Object(C.useState)({}),A=Object(y.a)(se,2),P=A[0],re=A[1],ne=Object(C.useState)("account"),I=Object(y.a)(ne,2),v=I[0],ie=I[1],D=Object(r.i)("@@initialState"),b=D.initialState,ue=D.setInitialState,c=Object(r.h)(),le=function(){var o=Object(m.a)(l.a.mark(function n(){var i,u;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,b==null||(i=b.fetchUserInfo)===null||i===void 0?void 0:i.call(b);case 2:u=t.sent,u&&ue(Object(f.a)(Object(f.a)({},b),{},{currentUser:u}));case 4:case"end":return t.stop()}},n)}));return function(){return o.apply(this,arguments)}}(),ce=function(){var o=Object(m.a)(l.a.mark(function n(i){var u;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return j(!0),t.prev=1,t.next=4,Object(q.b)(Object(f.a)(Object(f.a)({},i),{},{type:v}));case 4:if(u=t.sent,u.status!=="ok"){t.next=11;break}return M.default.success("\u767B\u5F55\u6210\u529F\uFF01"),t.next=9,le();case 9:return ae(),t.abrupt("return");case 11:re(u),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(1),M.default.error("\u767B\u5F55\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5\uFF01");case 17:j(!1);case 18:case"end":return t.stop()}},n,null,[[1,14]])}));return function(i){return o.apply(this,arguments)}}(),E=P.status,z=P.type;return Object(e.jsxs)("div",{className:s.a.container,children:[Object(e.jsx)("div",{className:s.a.lang,children:r.b&&Object(e.jsx)(r.b,{})}),Object(e.jsxs)("div",{className:s.a.content,children:[Object(e.jsxs)("div",{className:s.a.top,children:[Object(e.jsx)("div",{className:s.a.header,children:Object(e.jsxs)(X.a,{to:"/",children:[Object(e.jsx)("img",{alt:"logo",className:s.a.logo,src:"/logo.svg"}),Object(e.jsx)("span",{className:s.a.title,children:"Ant Design"})]})}),Object(e.jsx)("div",{className:s.a.desc,children:"Ant Design \u662F\u897F\u6E56\u533A\u6700\u5177\u5F71\u54CD\u529B\u7684 Web \u8BBE\u8BA1\u89C4\u8303"})]}),Object(e.jsxs)("div",{className:s.a.main,children:[Object(e.jsxs)(K.a,{initialValues:{autoLogin:!0},submitter:{searchConfig:{submitText:c.formatMessage({id:"pages.login.submit",defaultMessage:"\u767B\u5F55"})},render:function(n,i){return i.pop()},submitButtonProps:{loading:O,size:"large",style:{width:"100%"}}},onFinish:function(){var o=Object(m.a)(l.a.mark(function n(i){return l.a.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:ce(i);case 1:case"end":return p.stop()}},n)}));return function(n){return o.apply(this,arguments)}}(),children:[Object(e.jsxs)(F.a,{activeKey:v,onChange:ie,children:[Object(e.jsx)(F.a.TabPane,{tab:c.formatMessage({id:"pages.login.accountLogin.tab",defaultMessage:"\u8D26\u6237\u5BC6\u7801\u767B\u5F55"})},"account"),Object(e.jsx)(F.a.TabPane,{tab:c.formatMessage({id:"pages.login.phoneLogin.tab",defaultMessage:"\u624B\u673A\u53F7\u767B\u5F55"})},"mobile")]}),E==="error"&&z==="account"&&Object(e.jsx)(N,{content:c.formatMessage({id:"pages.login.accountLogin.errorMessage",defaultMessage:"\u8D26\u6237\u6216\u5BC6\u7801\u9519\u8BEF\uFF08admin/ant.design)"})}),v==="account"&&Object(e.jsxs)(e.Fragment,{children:[Object(e.jsx)(S.a,{name:"username",fieldProps:{size:"large",prefix:Object(e.jsx)(V.a,{className:s.a.prefixIcon})},placeholder:c.formatMessage({id:"pages.login.username.placeholder",defaultMessage:"\u7528\u6237\u540D: admin or user"}),rules:[{required:!0,message:Object(e.jsx)(r.a,{id:"pages.login.username.required",defaultMessage:"\u8BF7\u8F93\u5165\u7528\u6237\u540D!"})}]}),Object(e.jsx)(S.a.Password,{name:"password",fieldProps:{size:"large",prefix:Object(e.jsx)(L.a,{className:s.a.prefixIcon})},placeholder:c.formatMessage({id:"pages.login.password.placeholder",defaultMessage:"\u5BC6\u7801: ant.design"}),rules:[{required:!0,message:Object(e.jsx)(r.a,{id:"pages.login.password.required",defaultMessage:"\u8BF7\u8F93\u5165\u5BC6\u7801\uFF01"})}]})]}),E==="error"&&z==="mobile"&&Object(e.jsx)(N,{content:"\u9A8C\u8BC1\u7801\u9519\u8BEF"}),v==="mobile"&&Object(e.jsxs)(e.Fragment,{children:[Object(e.jsx)(S.a,{fieldProps:{size:"large",prefix:Object(e.jsx)(Z.a,{className:s.a.prefixIcon})},name:"mobile",placeholder:c.formatMessage({id:"pages.login.phoneNumber.placeholder",defaultMessage:"\u624B\u673A\u53F7"}),rules:[{required:!0,message:Object(e.jsx)(r.a,{id:"pages.login.phoneNumber.required",defaultMessage:"\u8BF7\u8F93\u5165\u624B\u673A\u53F7\uFF01"})},{pattern:/^1\d{10}$/,message:Object(e.jsx)(r.a,{id:"pages.login.phoneNumber.invalid",defaultMessage:"\u624B\u673A\u53F7\u683C\u5F0F\u9519\u8BEF\uFF01"})}]}),Object(e.jsx)(Q.a,{fieldProps:{size:"large",prefix:Object(e.jsx)(L.a,{className:s.a.prefixIcon})},captchaProps:{size:"large"},placeholder:c.formatMessage({id:"pages.login.captcha.placeholder",defaultMessage:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801"}),captchaTextRender:function(n,i){return n?"".concat(i," ").concat(c.formatMessage({id:"pages.getCaptchaSecondText",defaultMessage:"\u83B7\u53D6\u9A8C\u8BC1\u7801"})):c.formatMessage({id:"pages.login.phoneLogin.getVerificationCode",defaultMessage:"\u83B7\u53D6\u9A8C\u8BC1\u7801"})},name:"captcha",rules:[{required:!0,message:Object(e.jsx)(r.a,{id:"pages.login.captcha.required",defaultMessage:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801\uFF01"})}],onGetCaptcha:function(){var o=Object(m.a)(l.a.mark(function n(i){var u;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,_({phone:i});case 2:if(u=t.sent,u!==!1){t.next=5;break}return t.abrupt("return");case 5:M.default.success("\u83B7\u53D6\u9A8C\u8BC1\u7801\u6210\u529F\uFF01\u9A8C\u8BC1\u7801\u4E3A\uFF1A1234");case 6:case"end":return t.stop()}},n)}));return function(n){return o.apply(this,arguments)}}()})]}),Object(e.jsxs)("div",{style:{marginBottom:24},children:[Object(e.jsx)(R.a,{noStyle:!0,name:"autoLogin",children:Object(e.jsx)(r.a,{id:"pages.login.rememberMe",defaultMessage:"\u81EA\u52A8\u767B\u5F55"})}),Object(e.jsx)("a",{style:{float:"right"},children:Object(e.jsx)(r.a,{id:"pages.login.forgotPassword",defaultMessage:"\u5FD8\u8BB0\u5BC6\u7801"})})]})]}),Object(e.jsxs)(U.b,{className:s.a.other,children:[Object(e.jsx)(r.a,{id:"pages.login.loginWith",defaultMessage:"\u5176\u4ED6\u767B\u5F55\u65B9\u5F0F"}),Object(e.jsx)(J.a,{className:s.a.icon}),Object(e.jsx)(W.a,{className:s.a.icon}),Object(e.jsx)(Y.a,{className:s.a.icon})]})]})]}),Object(e.jsx)(k,{})]})},fe=x.default=te}}]);
